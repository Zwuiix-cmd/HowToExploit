import { Relay } from 'bedrock-protocol';
import {RelaySession} from "./src/RelaySession";
import * as Path from "node:path";

const proxyOptions = {
    host: '127.0.0.1',
    port: 19132,
    motd: { motd: "How To Exploit?", levelName: "How To Exploit?" },
    maxPlayers: 99999999,
    destination: { host: '127.0.0.1', port: 19133 },
    profilesFolder: Path.join(process.cwd(), "profiles"),
    enableChunkCaching: true,
    forceSingle: true,
    omitParseErrors: true,
};

const relay = new Relay(proxyOptions);
relay.listen();

relay.on('connect', player => {
    console.log('RelaySession opened');
    new RelaySession(player);
});
